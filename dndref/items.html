<!doctype HTML>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>D&D 5e QuickRef</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <script src="main.js"></script>
    <script src="magicitems.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="interface.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <script src="./isotope.pkgd.js"></script>
</head>


<body>
    <div class="w3-top w3-darker-grey w3-row-padding bar-pad" id="navBarDiv">
    </div>

    <div class="w3-row-padding w3-section">
        <div class="w3-col s0 m0 l1">
            &emsp;
        </div>
        <div class="w3-col s12 m12 l10">
            <div id="magicItems" class="w3-section w3-row-padding info">
                <h1>Magic Items</h1>
                <p>Some magical items require Attunement, and some can only be attuned to by specific people (spellcasters, Paladins, etc).
                    <br/>
                    <br/>
                    You can spend time during a Short Rest to attune to an item, at which point you learn what the magical item is and how it works. You can also unattune from an item during a short rest.
                    <br/>
                    Be aware that some magic items are cursed. This curse is only revealed when an Identify spell is cast on the item, or when you become attuned to it. 
                    <br/>
                    <br/>
                    You can only have up to <emph>3</emph> magic items attuned to you at one time, and an item can only be attuned to one person.
                </p>
                <br/>
                <div class="w3-row">
                    <div class="w3-col s12 m6 l4">
                        <input class="w3-input w3-border w3-padding w3-grey w3-round" type="text"
                            placeholder="Search by name..." id="magicItemNameSearch" onkeyup="magicItemNameFilter()">
                    </div>
                </div>                
                <div class="w3-bar" style="padding-top: 10px; padding-bottom: 4px">
                    <button id="typeBtn0" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this)">Ammo</button>
                    <button id="typeBtn1" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this)">Light Armor</button>
                    <button id="typeBtn2" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this)">Medium Armor</button>
                    <button id="typeBtn3" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this)">Heavy Armor</button>
                    <button id="typeBtn4" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this)">Melee Weapon</button>
                    <button id="typeBtn5" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this)">Ranged Weapon</button>
                    <button id="typeBtn6" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this)">Potion</button>
                    <button id="typeBtn7" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this)">Ring</button>
                        <button id="typeBtn8" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                            onclick="itemFilter(this)">Rod</button>
                            <button id="typeBtn9" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                                onclick="itemFilter(this)">Scroll</button>
                                <button id="typeBtn10" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                                    onclick="itemFilter(this)">Shield</button>
                                    <button id="typeBtn11" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                                        onclick="itemFilter(this)">Staff</button>
                                        <button id="typeBtn12" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                                            onclick="itemFilter(this)">Wand</button>
                                            <button id="typeBtn13" class="w3-button w3-grey w3-bar-item typeBtn" style="padding: 8px !important;"
                                                onclick="itemFilter(this)">Wondrous Item</button>
                </div>             
                <div class="w3-bar" style="padding-top: 4px; padding-bottom: 4px">
                    <button id="rarityBtn0" class="w3-button w3-grey w3-bar-item rarityBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this, 1)">Common</button>
                    <button id="rarityBtn1" class="w3-button w3-grey w3-bar-item rarityBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this, 1)">Uncommon</button>
                    <button id="rarityBtn2" class="w3-button w3-grey w3-bar-item rarityBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this, 1)">Rare</button>
                    <button id="rarityBtn3" class="w3-button w3-grey w3-bar-item rarityBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this, 1)">Very Rare</button>
                    <button id="rarityBtn4" class="w3-button w3-grey w3-bar-item rarityBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this, 1)">Legendary</button>
                    <button id="rarityBtn5" class="w3-button w3-grey w3-bar-item rarityBtn" style="padding: 8px !important;"
                        onclick="itemFilter(this, 1)">Artifact</button>
                </div>
                <br />
                Items matching filter: <emph><span id="filterCount"></span></emph>
                <br/>
                <br />
                <div class="magicItemGrid">
                    <div class="" id="defaultItemCard" style="display:none;">
                        <div class="w3-card-2 w3-round-large">
                            <div class="w3-row-padding">
                                <div style="text-align: right; margin-bottom: -20px; margin-top: 5px;" onclick="cardNameCopy(this)" id="cardCopy"><i class="fa fa-clone tooltip" aria-hidden="true"><div class="tooltiptext">Copy Link</div></i></div>
                                <span style="display: none !important;" class="itemFilters"></span>
                                <div class="copyText w3-hide"></div>
                                <h3 class="itemName"></h3>
                                <em><h5><span class="itemType"></span></h5></em>
                            </div>
                            <div class="w3-row-padding">
                                <div class="w3-hide itemFilters"></div>
                                <span class="itemAttributes"></span>
                                <span class="itemDesc"></span>
                            </div>
                            <br />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="w3-col s0 m0 l1">
            &emsp;
        </div>

    </div>
</body>
<footer>
    <div class="w3-row-padding w3-section">
        <div class="w3-col s0 m1 l1">
            <p></p>
        </div>
        <div class="w3-col s12 m10 l10">
            All D&D material is Â© Wizards of the Coast
        </div>
        <div class="w3-col s0 m1 l1">
            <p></p>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            buildMagicItems();
            $('.magicItemGrid').isotope({
                itemSelector: '.grid-item',
                masonry: {
                    columnWidth: 25
                },
                getSortData: {
                    name: '.itemName',
                    type: '.itemType'
                }
            });
            $('.magicItemGrid').isotope({
                sortBy: 'name'
            })
            $("#magicItemNameSearch").val("")
            $('.magicItemGrid').isotope('updateSortData').isotope();
            findURISearch();
        });

        

        function findURISearch() {
            let searchParam = $(location).attr('search');
            let hashParam = $(location).attr('hash');
            
            if (searchParam != "") {
                searchParam = decodeURIComponent(searchParam)
                searchParam = searchParam.split("?s=")[1]
                $("#magicItemNameSearch").val(searchParam);
                magicItemNameFilter();
            } else if (hashParam != "") {
                searchParam = hashParam.split("?s=")[1];
                if (searchParam != "" && searchParam != undefined) {                    
                searchParam = decodeURIComponent(searchParam)
                $("#magicItemNameSearch").val(searchParam);
                magicItemNameFilter();
                }
            }
        }
    </script>
</footer>

</html>